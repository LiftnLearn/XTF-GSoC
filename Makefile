.PHONY: all
all:
	@for D in $(wildcard tests/*); do \
		$(MAKE) -C $$D build; \
	done

.PHONY: install
install:
	@for D in $(wildcard tests/*); do \
		$(MAKE) -C $$D install; \
	done

.PHONY: cscope
cscope:
	find include/ arch/ common/ tests/ -name "*.[hcsS]" > cscope.files
	cscope -b -q -k

.PHONY: clean
clean:
	find . \( -name "*.o" -o -name "*.d" -o -name "*.lds" \) -delete
	find tests/ -executable -name "test-*" -delete

.PHONY: distclean
distclean: clean
	find . -name "*~" -delete
	rm -f cscope.*
	rm -rf docs/autogenerated/ dist/

.PHONY: doxygen
doxygen: Doxyfile
	doxygen Doxyfile
